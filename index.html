<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="https://shipengfei92.github.io">
  <title>Pengfei Shi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Pengfei Shi">
<meta property="og:url" content="https://shipengfei92.github.io/index.html">
<meta property="og:site_name" content="Pengfei Shi">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Pengfei Shi">
  
    <link rel="alternative" href="/atom.xml" title="Pengfei Shi" type="application/atom+xml">
  
  
    <link rel="icon" href="/assets/img/favicon.ico">
  
  <link rel="stylesheet" type="text/css" href="/./main.234bc0.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

</head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="/assets/img/head.jpg" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">Pengfei Shi</a></h1>
		</hgroup>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">Home Page</a></li>
	        
				<li><a href="/tags/Conformal-Geometry/">Conformal Geometry</a></li>
	        
				<li><a href="/tags/Cloud-Computing/">Cloud Computing</a></li>
	        
				<li><a href="/tags/Deep-Learning/">Deep Learning</a></li>
	        
				<li><a href="/tags/Blog/">Blog</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">友链</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
		        
					<a class="weibo" target="_blank" href="http://weibo.com/shipengfei92" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="mail" target="_blank" href="mailto:shipengfei92@gmail.com" title="mail"><i class="icon-mail"></i></a>
		        
					<a class="linkedin" target="_blank" href="https://cn.linkedin.com/in/pengfei-shi-574b1799" title="linkedin"><i class="icon-linkedin"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="/assets/img/head.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">Pengfei Shi</h1>
			</hgroup>
			
			
			
				
			
				
			
				
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/shipengfei92" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="mail" target="_blank" href="mailto:shipengfei92@gmail.com" title="mail"><i class="icon-mail"></i></a>
			        
						<a class="linkedin" target="_blank" href="https://cn.linkedin.com/in/pengfei-shi-574b1799" title="linkedin"><i class="icon-linkedin"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 70%">
				
				
					<li style="width: 20%"><a href="/">Home Page</a></li>
		        
					<li style="width: 20%"><a href="/tags/Conformal-Geometry/">Conformal Geometry</a></li>
		        
					<li style="width: 20%"><a href="/tags/Cloud-Computing/">Cloud Computing</a></li>
		        
					<li style="width: 20%"><a href="/tags/Deep-Learning/">Deep Learning</a></li>
		        
					<li style="width: 20%"><a href="/tags/Blog/">Blog</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-Untitled" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Fashion Style Generation – related to –&gt; artistic style transfer</p>
<p>Neither existing global nor patch based neural style transfer methods could well solve these challenges.</p>
<p>Requirement:</p>
<ul>
<li>The synthetic image should preserve the similar design as the basic clothing,</li>
<li>Meanwhile, it should blend the new style pattern on the clothing.</li>
</ul>
<p>In this paper, they propose an end-to-end feed-forward neural network which consists of a fashion style generator and a discriminator.</p>
<p>The global and patch based style and content losses calculated by the discriminator alternatively back-propagate the generator network and optimize it.</p>
<p>Discriminator –&gt; losses for back-propagation –&gt; Generator</p>
<ul>
<li>The global optimization stage the clothing form and design,</li>
<li>The local optimization stage preserves the de- tailed style pattern.</li>
</ul>
<p>Applying artificial intelligence to solve problems in art and fashion fields</p>
<p>fashion style classification<br><br>clothing parsing<br><br>clothing retrieval<br><br>recommendation<br></p>
<p>In this paper, they focus on a novel problem: fashion style generation.</p>
<p>Existing neural style transfer works mainly consist of two kinds of approaches: global and patch.</p>
<p>Global (i.e., full image) based methods achieve impressive results in artistic style transfer, but with limited fidelity in local detail, especially to high-resolution images.</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/09/13/Untitled/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-ANTLR Hands on" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="ANTLR-Hands-on"><a href="#ANTLR-Hands-on" class="headerlink" title="ANTLR Hands on"></a>ANTLR Hands on</h1><h2 id="Environments-amp-Installation"><a href="#Environments-amp-Installation" class="headerlink" title="Environments &amp; Installation"></a>Environments &amp; Installation</h2><h3 id="Install-JDK"><a href="#Install-JDK" class="headerlink" title="Install JDK"></a>Install JDK</h3><p>Reference:</p>
<p>In Ubuntu:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install openjdk-8-jre</div></pre></td></tr></table></figure>
<p>In CentOS:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo yum install java-1.8.0-openjdk</div></pre></td></tr></table></figure>
<p>In Mac OS:</p>
<p>Download <code>jdk-8uversion-macosx-amd64.dmg</code> and double click on it.</p>
<h3 id="Check-Java-Version"><a href="#Check-Java-Version" class="headerlink" title="Check Java Version"></a>Check Java Version</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ java -version</div><div class="line"></div><div class="line">java version <span class="string">"1.8.0_51"</span></div><div class="line">Java(TM) SE Runtime Environment (build 1.8.0_51-b16)</div><div class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.51-b03, mixed mode)</div></pre></td></tr></table></figure>
<h3 id="Download-ANTLR"><a href="#Download-ANTLR" class="headerlink" title="Download ANTLR"></a>Download ANTLR</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget http://www.antlr.org/download/antlr-3.5.2-complete.jar</div></pre></td></tr></table></figure>
<p>Add this to the <code>CLASSPATH</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">export</span> CLASSPATH=~/software/antlr-3.5.2-complete.jar:<span class="variable">$CLASSPATH</span></div></pre></td></tr></table></figure>
<p>Verify:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ java org.antlr.Tool -version</div><div class="line"></div><div class="line">ANTLR Parser Generator  Version 3.5.2</div></pre></td></tr></table></figure>
<h2 id="Tutorials"><a href="#Tutorials" class="headerlink" title="Tutorials"></a>Tutorials</h2><p>Refer:<br><a href="https://theantlrguy.atlassian.net/wiki/display/ANTLR3/Five+minute+introduction+to+ANTLR+3" target="_blank" rel="external">links</a></p>
<ul>
<li>$A Lexer$: This reads an input character or byte stream (i.e. characters, binary data, etc.), divides it into tokens using patterns you specify, and generates a token stream as output. It can also flag some tokens such as whitespace and comments as hidden using a protocol that ANTLR parsers automatically understand and respect.</li>
<li>$A Parser$: This reads a token stream (normally generated by a lexer), and matches phrases in your language via the rules (patterns) you specify, and typically performs some semantic action for each phrase (or sub-phrase) matched. Each match could invoke a custom action, write some text via StringTemplate, or generate an Abstract Syntax Tree for additional processing.</li>
</ul>
<p>Create <code>SimpleCalc.g</code>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">grammar SimpleCalc;</div><div class="line"> </div><div class="line">tokens &#123;</div><div class="line">    PLUS    = <span class="string">'+'</span> ;</div><div class="line">    MINUS   = <span class="string">'-'</span> ;</div><div class="line">    MULT    = <span class="string">'*'</span> ;</div><div class="line">    DIV = <span class="string">'/'</span> ;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="meta">@members</span> &#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        SimpleCalcLexer lex = <span class="keyword">new</span> SimpleCalcLexer(<span class="keyword">new</span> ANTLRFileStream(args[<span class="number">0</span>]));</div><div class="line">        CommonTokenStream tokens = <span class="keyword">new</span> CommonTokenStream(lex);</div><div class="line"> </div><div class="line">        SimpleCalcParser parser = <span class="keyword">new</span> SimpleCalcParser(tokens);</div><div class="line"> </div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            parser.expr();</div><div class="line">        &#125; <span class="keyword">catch</span> (RecognitionException e)  &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="comment">/*------------------------------------------------------------------</span></div><div class="line"> * PARSER RULES</div><div class="line"> *------------------------------------------------------------------*/</div><div class="line"> </div><div class="line">expr    : term ( ( PLUS | MINUS )  term )* ;</div><div class="line"> </div><div class="line">term    : factor ( ( MULT | DIV ) factor )* ;</div><div class="line"> </div><div class="line">factor  : NUMBER ;</div><div class="line"> </div><div class="line"> </div><div class="line"><span class="comment">/*------------------------------------------------------------------</span></div><div class="line"> * LEXER RULES</div><div class="line"> *------------------------------------------------------------------*/</div><div class="line"> </div><div class="line">NUMBER  : (DIGIT)+ ;</div><div class="line"> </div><div class="line">WHITESPACE : ( <span class="string">'\t'</span> | <span class="string">' '</span> | <span class="string">'\r'</span> | <span class="string">'\n'</span>| <span class="string">'\u000C'</span> )+    &#123; $channel = HIDDEN; &#125; ;</div><div class="line"> </div><div class="line">fragment DIGIT  : <span class="string">'0'</span>..<span class="string">'9'</span> ;</div></pre></td></tr></table></figure>
<p>Run this file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java org.antlr.Tool SimpleCalc.g</div></pre></td></tr></table></figure>
<p>Then, we can find three generated files:</p>
<p><code>SimpleCalc.tokens</code>, <code>SimpleCalcParser.java</code> and <code>SimpleCalcLexer.java</code></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/07/04/ANTLR Hands on/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-notes-for-hotkeys" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/09/notes-for-hotkeys/">notes for hotkeys</a>
    </h1>
  

        
        <a href="/2017/06/09/notes-for-hotkeys/" class="archive-article-date">
  	<time datetime="2017-06-09T06:51:58.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-06-09</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><p>批量注释和解注释:<code>control+/</code></p>
<p>批量缩进: <code>tab</code> and <code>tab+shift</code></p>
<h2 id="Matlab"><a href="#Matlab" class="headerlink" title="Matlab"></a>Matlab</h2><h2 id="Tex-studio"><a href="#Tex-studio" class="headerlink" title="Tex studio"></a>Tex studio</h2><p>批量注释和解注释:<code>command+T</code> + <code>command+U</code></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">hotkeys</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/06/09/notes-for-hotkeys/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-Keras-switch-backend" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/07/Keras-switch-backend/">Keras-switch-backend</a>
    </h1>
  

        
        <a href="/2017/06/07/Keras-switch-backend/" class="archive-article-date">
  	<time datetime="2017-06-07T10:35:53.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-06-07</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Switching-from-one-backend-to-another"><a href="#Switching-from-one-backend-to-another" class="headerlink" title="Switching from one backend to another"></a>Switching from one backend to another</h1><p>If you have run Keras at least once, you will find the Keras configuration file at:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$HOME/.keras/keras.json</div></pre></td></tr></table></figure>
<p>If it isn’t there, you can create it.</p>
<p>NOTE for Windows Users: Please change $HOME with %USERPROFILE%.</p>
<p>The default configuration file looks like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">&quot;image_data_format&quot;: &quot;channels_last&quot;,</div><div class="line">&quot;epsilon&quot;: 1e-07,</div><div class="line">&quot;floatx&quot;: &quot;float32&quot;,</div><div class="line">&quot;backend&quot;: &quot;tensorflow&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Simply change the field backend to either “theano” or “tensorflow”, and Keras will use the new configuration next time you run any Keras code.</p>
<p>You can also define the environment variable KERAS_BACKEND and this will override what is defined in your config file :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">KERAS_BACKEND=tensorflow python -c &quot;from keras import backend&quot;</div><div class="line">Using TensorFlow backend.</div></pre></td></tr></table></figure></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/06/07/Keras-switch-backend/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-Some-Basic-knowledge-for-programming" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/08/Some-Basic-knowledge-for-programming/">Some Basic knowledge for programming </a>
    </h1>
  

        
        <a href="/2017/04/08/Some-Basic-knowledge-for-programming/" class="archive-article-date">
  	<time datetime="2017-04-08T02:02:27.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-04-08</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="virtual-function"><a href="#virtual-function" class="headerlink" title="virtual function"></a>virtual function</h2><p>在某基类中声明为 virtual 并在一个或多个派生类中被重新定义的成员函数，用法格式为：virtual 函数返回类型 函数名（参数表） {函数体}；实现多态性，通过指向派生类的基类指针或引用，访问派生类中同名覆盖成员函数</p>
<h2 id="multiple-thread"><a href="#multiple-thread" class="headerlink" title="multiple thread"></a>multiple thread</h2><h2 id="deadlock-and-starvation"><a href="#deadlock-and-starvation" class="headerlink" title="deadlock and starvation"></a>deadlock and starvation</h2><h2 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h2><p>UDP is Connectionless Protocal</p>
<h2 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h2><p>To establish a connection, TCP uses a three-way handshake. Before a client attempts to connect with a server, the server must first bind to and listen at a port to open it up for connections: this is called a passive open. Once the passive open is established, a client may initiate an active open. To establish a connection, the three-way (or 3-step) handshake occurs:</p>
<p>SYN: The active open is performed by the client sending a SYN to the server. The client sets the segment’s sequence number to a random value A.<br>SYN-ACK: In response, the server replies with a SYN-ACK. The acknowledgment number is set to one more than the received sequence number i.e. A+1, and the sequence number that the server chooses for the packet is another random number, B.<br>ACK: Finally, the client sends an ACK back to the server. The sequence number is set to the received acknowledgement value i.e. A+1, and the acknowledgement number is set to one more than the received sequence number i.e. B+1.<br>At this point, both the client and server have received an acknowledgment of the connection. The steps 1, 2 establish the connection parameter (sequence number) for one direction and it is acknowledged. The steps 2, 3 establish the connection parameter (sequence number) for the other direction and it is acknowledged. With these, a full-duplex communication is established.</p>
<h2 id="some-tricks"><a href="#some-tricks" class="headerlink" title="some tricks"></a>some tricks</h2><ul>
<li>What is the difference between using <code>++i</code> and <code>i++</code>? </li>
</ul>
<p><code>++i</code> will increment the value of i, and then return the incremented value.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"> i = 1;</div><div class="line"> j = ++i;</div><div class="line">(i is 2, j is 2)</div></pre></td></tr></table></figure>
<p><code>i++</code> will increment the value of i, but return the original value that i held before being incremented.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">i = 1;</div><div class="line">j = i++;</div><div class="line">(i is 2, j is 1)</div></pre></td></tr></table></figure>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/04/08/Some-Basic-knowledge-for-programming/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-Leetcode" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/07/Leetcode/">Leetcode</a>
    </h1>
  

        
        <a href="/2017/04/07/Leetcode/" class="archive-article-date">
  	<time datetime="2017-04-07T11:17:13.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-04-07</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Minimum-Depth-of-Binary-Tree"><a href="#Minimum-Depth-of-Binary-Tree" class="headerlink" title="Minimum Depth of Binary Tree"></a>Minimum Depth of Binary Tree</h2><p>Given a binary tree, find its minimum depth.The minimum depth is the number of nodes along the shortest path from the root node down to the nearest leaf node.</p>
<p>java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Definition for binary tree</div><div class="line"> * public class TreeNode &#123;</div><div class="line"> *     int val;</div><div class="line"> *     TreeNode left;</div><div class="line"> *     TreeNode right;</div><div class="line"> *     TreeNode(int x) &#123; val = x; &#125;</div><div class="line"> * &#125;</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">run</span><span class="params">(TreeNode root)</span> </span>&#123;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>)&#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (root.left == <span class="keyword">null</span>)&#123;</div><div class="line">            <span class="keyword">return</span> run(root.right) + <span class="number">1</span>;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (root.right == <span class="keyword">null</span>)&#123;</div><div class="line">            <span class="keyword">return</span> run(root.left) + <span class="number">1</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> Math.min(run(root.left), run(root.right))+<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>c++</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">run</span><span class="params">(TreeNode *root)</span> </span>&#123;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span>(root == <span class="literal">nullptr</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (root-&gt;left == <span class="literal">nullptr</span> )&#123;</div><div class="line">            </div><div class="line">            <span class="keyword">return</span> run(root -&gt;right) + <span class="number">1</span>;</div><div class="line">            </div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (root-&gt; right == <span class="literal">nullptr</span>)&#123;</div><div class="line">            <span class="keyword">return</span> run(root -&gt;left) +<span class="number">1</span>;</div><div class="line">        &#125; <span class="keyword">else</span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">1</span> + min(run(root-&gt;left),run(root-&gt;right));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="Reverse-Polish-Notation"><a href="#Reverse-Polish-Notation" class="headerlink" title="Reverse Polish Notation"></a>Reverse Polish Notation</h2><p>Evaluate the value of an arithmetic expression in Reverse Polish Notation.<br>Valid operators are<code>+,-,*,/</code>. Each operand may be an integer or another expression.<br>Some examples:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[&quot;2&quot;, &quot;1&quot;, &quot;+&quot;, &quot;3&quot;, &quot;*&quot;] -&gt; ((2 + 1) * 3) -&gt; 9</div><div class="line">[&quot;4&quot;, &quot;13&quot;, &quot;5&quot;, &quot;/&quot;, &quot;+&quot;] -&gt; (4 + (13 / 5)) -&gt; 6</div></pre></td></tr></table></figure>
<h2 id="max-points-on-a-line"><a href="#max-points-on-a-line" class="headerlink" title="max-points-on-a-line"></a>max-points-on-a-line</h2><p>Given n points on a 2D plane, find the maximum number of points that lie on the same straight line.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"> </div><div class="line"> </div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line"> * Definition for a point.</div><div class="line"> * struct Point &#123;</div><div class="line"> *     int x;</div><div class="line"> *     int y;</div><div class="line"> *     Point() : x(0), y(0) &#123;&#125;</div><div class="line"> *     Point(int a, int b) : x(a), y(b) &#123;&#125;</div><div class="line"> * &#125;;</div><div class="line"> */</div><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">     </div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxPoints</span><span class="params">(<span class="built_in">vector</span>&lt;Point&gt; &amp;points)</span> </span>&#123;</div><div class="line">         </div><div class="line">        <span class="keyword">int</span> size = points.size();</div><div class="line">         </div><div class="line">        <span class="keyword">if</span>( size == <span class="number">0</span>)&#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (size == <span class="number">1</span>)&#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">             </div><div class="line">            <span class="keyword">int</span> result = <span class="number">0</span>;</div><div class="line">             </div><div class="line">             </div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; ++i)&#123;</div><div class="line">                <span class="keyword">int</span> curmax = <span class="number">1</span>;</div><div class="line">                <span class="keyword">int</span> same = <span class="number">0</span>;</div><div class="line">                <span class="keyword">int</span> verticle = <span class="number">1</span>;</div><div class="line">                 </div><div class="line">                <span class="built_in">map</span> &lt; <span class="keyword">double</span>, <span class="keyword">int</span> &gt; m;</div><div class="line">                 </div><div class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; size; ++j)&#123;</div><div class="line">                     </div><div class="line">                    <span class="keyword">if</span>(i == j) <span class="keyword">continue</span>;</div><div class="line">                     </div><div class="line">                    <span class="keyword">int</span> dx = points[i].x - points[j].x;</div><div class="line">                    <span class="keyword">int</span> dy = points[i].y - points[j].y;</div><div class="line">                     </div><div class="line">                </div><div class="line">                    <span class="keyword">if</span>(dx == <span class="number">0</span>)&#123;</div><div class="line">                       <span class="keyword">if</span> (dy == <span class="number">0</span>) &#123;same ++;&#125;</div><div class="line">                       <span class="keyword">else</span>&#123;</div><div class="line">                           verticle ++;</div><div class="line">                           curmax = max( curmax, verticle);</div><div class="line">                       &#125;</div><div class="line">                        </div><div class="line">                          </div><div class="line">                    &#125;<span class="keyword">else</span>&#123;</div><div class="line">                        <span class="keyword">double</span> k = (<span class="number">1.0</span>*dy)/dx;</div><div class="line">                        <span class="keyword">if</span>(m[k] == <span class="number">0</span>)&#123;</div><div class="line">                            m[k] = <span class="number">2</span>;</div><div class="line">                        &#125;<span class="keyword">else</span>&#123;</div><div class="line">                            ++m[k];</div><div class="line">                        &#125;</div><div class="line">                        curmax = max(m[k],curmax);</div><div class="line">                         </div><div class="line">                    &#125;</div><div class="line">                     </div><div class="line">                &#125;</div><div class="line">                result = max(result, curmax + same);</div><div class="line">                 </div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> result;</div><div class="line">        &#125;</div><div class="line">                 </div><div class="line">         </div><div class="line">         </div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="sort-list"><a href="#sort-list" class="headerlink" title="sort-list"></a>sort-list</h2><p>Sort a linked list in O(n log n) time using constant space complexity.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Definition for singly-linked list.</div><div class="line"> * struct ListNode &#123;</div><div class="line"> *     int val;</div><div class="line"> *     ListNode *next;</div><div class="line"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</div><div class="line"> * &#125;;</div><div class="line"> */</div><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    </div><div class="line">    <span class="function">ListNode *<span class="title">merge</span><span class="params">(ListNode * left, ListNode * right)</span></span>&#123;</div><div class="line">        <span class="function">ListNode <span class="title">tmp</span><span class="params">(<span class="number">0</span>)</span></span>;</div><div class="line">        ListNode *p = &amp;tmp;</div><div class="line">        </div><div class="line">        <span class="keyword">while</span> (left &amp;&amp; right)&#123;</div><div class="line">            <span class="keyword">if</span> (left -&gt; val &lt; right -&gt; val)&#123;</div><div class="line">                p -&gt; next = left;</div><div class="line">                left = left -&gt; next;</div><div class="line">            &#125; <span class="keyword">else</span>&#123;</div><div class="line">                p -&gt; next = right;</div><div class="line">                right = right -&gt; next;</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            p = p -&gt;next;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span>(left)&#123;</div><div class="line">            p -&gt; next = left;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span>(right)&#123;</div><div class="line">            p -&gt; next = right;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        </div><div class="line">        </div><div class="line">        <span class="keyword">return</span> tmp.next;</div><div class="line">        </div><div class="line">        </div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function">ListNode *<span class="title">sortList</span><span class="params">(ListNode *head)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>(!head || !head-&gt;next)&#123;</div><div class="line">            <span class="keyword">return</span> head;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        ListNode *p = head, *q = head-&gt;next;</div><div class="line">        </div><div class="line">        <span class="keyword">while</span>(q &amp;&amp; q-&gt;next)&#123;</div><div class="line">            p = p-&gt;next;</div><div class="line">            q = q-&gt;next-&gt;next;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        ListNode * right = sortList( p -&gt;next);</div><div class="line">        p -&gt;next = <span class="literal">NULL</span>;</div><div class="line">        ListNode * left = sortList(head);</div><div class="line">        </div><div class="line">        <span class="keyword">return</span> merge(left, right);</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="two-sum"><a href="#two-sum" class="headerlink" title="two-sum"></a>two-sum</h2><p>Given an array of integers, find two numbers such that they add up to a specific target number.<br>The function twoSum should return indices of the two numbers such that they add up to the target, where index1 must be less than index2. Please note that your returned answers (both index1 and index2) are not zero-based.<br>You may assume that each input would have exactly one solution.<br>Input: numbers={2, 7, 11, 15}, target=9<br>Output: index1=1, index2=2</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; twoSum(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;numbers, <span class="keyword">int</span> target) &#123;</div><div class="line">        <span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; ans;</div><div class="line">        <span class="keyword">int</span> index1 = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> index2 = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numbers.size() - <span class="number">1</span>; ++i)&#123;</div><div class="line">            <span class="keyword">int</span> tmp = target - numbers[i];</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i+<span class="number">1</span>; j &lt;numbers.size(); ++j )&#123;</div><div class="line">                <span class="keyword">if</span> (tmp == numbers[j])&#123;</div><div class="line">                    ans.push_back(i+<span class="number">1</span>);</div><div class="line">                    ans.push_back(j+<span class="number">1</span>);</div><div class="line">                    </div><div class="line">                    </div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">return</span> ans;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="using-hash-unordered-map"><a href="#using-hash-unordered-map" class="headerlink" title="using hash unordered_map"></a>using hash unordered_map</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; twoSum(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;numbers, <span class="keyword">int</span> target) &#123;</div><div class="line">        </div><div class="line">        <span class="built_in">unordered_map</span> &lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; hash;</div><div class="line">        <span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; res;</div><div class="line">        </div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numbers.size(); ++i)&#123;</div><div class="line">            hash[numbers[i]] = i;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numbers.size(); ++i)&#123;</div><div class="line">            <span class="keyword">int</span> tmp = target - numbers[i];</div><div class="line">            <span class="keyword">if</span>(hash.find(tmp)!= hash.end() &amp;&amp; hash[tmp] &gt; i)&#123;</div><div class="line">                res.push_back(i+<span class="number">1</span>);</div><div class="line">                res.push_back(hash[tmp] + <span class="number">1</span>);</div><div class="line">                </div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">        <span class="comment">/*</span></div><div class="line">        vector &lt;int&gt; ans;</div><div class="line">        int index1 = 0;</div><div class="line">        int index2 = 0;</div><div class="line">        for (int i = 0; i &lt; numbers.size() - 1; ++i)&#123;</div><div class="line">            int tmp = target - numbers[i];</div><div class="line">            for(int j = i+1; j &lt;numbers.size(); ++j )&#123;</div><div class="line">                if (tmp == numbers[j])&#123;</div><div class="line">                    ans.push_back(i+1);</div><div class="line">                    ans.push_back(j+1);</div><div class="line">                    </div><div class="line">                    </div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        return ans;*/</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="balanced-binary-tree"><a href="#balanced-binary-tree" class="headerlink" title="balanced-binary-tree"></a>balanced-binary-tree</h2><p>Given a binary tree, determine if it is height-balanced.<br>For this problem, a height-balanced binary tree is defined as a binary tree in which the depth of the two subtrees of every node never differ by more than 1.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Definition for binary tree</div><div class="line"> * struct TreeNode &#123;</div><div class="line"> *     int val;</div><div class="line"> *     TreeNode *left;</div><div class="line"> *     TreeNode *right;</div><div class="line"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</div><div class="line"> * &#125;;</div><div class="line"> */</div><div class="line"></div><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getDepth</span><span class="params">(TreeNode * root)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span> (root == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        <span class="keyword">if</span> (root -&gt; left == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="number">1</span> + getDepth(root -&gt;right);</div><div class="line">        <span class="keyword">if</span> (root -&gt; right == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="number">1</span> + getDepth(root -&gt;left);</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span> + max(getDepth(root-&gt; left), getDepth(root-&gt; right));</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isBalanced</span><span class="params">(TreeNode *root)</span> </span>&#123;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> (root == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">        </div><div class="line">        </div><div class="line">        <span class="keyword">int</span> left = getDepth(root -&gt; left);</div><div class="line">        <span class="keyword">int</span> right = getDepth(root -&gt; right);</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> (<span class="built_in">abs</span>(left - right) &gt; <span class="number">1</span> ) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        </div><div class="line">        <span class="keyword">return</span> (isBalanced(root -&gt; left) &amp;&amp; isBalanced(root -&gt; right));</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="binary-preorder-traversal"><a href="#binary-preorder-traversal" class="headerlink" title="binary-preorder-traversal"></a>binary-preorder-traversal</h2><p>Given a binary tree, return the preorder traversal of its nodes’ values.<br>For example:<br>Given binary tree<code>{1,#,2,3}</code>,</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span></div><div class="line"> \</div><div class="line">  <span class="number">2</span></div><div class="line"> /</div><div class="line"><span class="number">3</span></div></pre></td></tr></table></figure>
<p>return<code>[1,2,3]</code>.<br>Note: Recursive solution is trivial, could you do it iteratively?</p>
<p>###Recursive</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Definition for binary tree</div><div class="line"> * struct TreeNode &#123;</div><div class="line"> *     int val;</div><div class="line"> *     TreeNode *left;</div><div class="line"> *     TreeNode *right;</div><div class="line"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</div><div class="line"> * &#125;;</div><div class="line"> */</div><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; preorderTraversal(TreeNode *root) &#123;</div><div class="line">        <span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; result;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> (root == <span class="literal">NULL</span>) <span class="keyword">return</span> result;</div><div class="line">        </div><div class="line">        helper(root,result);</div><div class="line">        </div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line"><span class="keyword">private</span>:</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">helper</span><span class="params">(TreeNode * root, <span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; &amp;vec)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span> (root == <span class="literal">NULL</span>) <span class="keyword">return</span>;</div><div class="line">        vec.push_back(root -&gt; val);</div><div class="line">        helper(root -&gt; left, vec);</div><div class="line">        helper(root -&gt; right, vec);</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="iterative"><a href="#iterative" class="headerlink" title="iterative"></a>iterative</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Definition for binary tree</div><div class="line"> * struct TreeNode &#123;</div><div class="line"> *     int val;</div><div class="line"> *     TreeNode *left;</div><div class="line"> *     TreeNode *right;</div><div class="line"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</div><div class="line"> * &#125;;</div><div class="line"> */</div><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; preorderTraversal(TreeNode *root) &#123;</div><div class="line">        <span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; result;</div><div class="line">        <span class="built_in">stack</span> &lt;TreeNode *&gt; st;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> (root == <span class="literal">NULL</span>) <span class="keyword">return</span> result;</div><div class="line">        </div><div class="line">        st.push(root);</div><div class="line">        </div><div class="line">        <span class="keyword">while</span>(!st.empty())&#123;</div><div class="line">            TreeNode * current = st.top();</div><div class="line">            st.pop();</div><div class="line">            </div><div class="line">            <span class="keyword">if</span> (current -&gt; right != <span class="literal">NULL</span>) st.push(current-&gt;right);</div><div class="line">            <span class="keyword">if</span> (current -&gt; left != <span class="literal">NULL</span>) st.push(current-&gt;left);</div><div class="line">            result.push_back(current -&gt; val);</div><div class="line">            </div><div class="line">            </div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        </div><div class="line">        </div><div class="line">        </div><div class="line">        <span class="comment">//helper(root,result);</span></div><div class="line">        </div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line"><span class="keyword">private</span>:</div><div class="line">    </div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">helper</span><span class="params">(TreeNode * root, <span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; &amp;vec)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span> (root == <span class="literal">NULL</span>) <span class="keyword">return</span>;</div><div class="line">        vec.push_back(root -&gt; val);</div><div class="line">        helper(root -&gt; left, vec);</div><div class="line">        helper(root -&gt; right, vec);</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="string-to-integer-atoi"><a href="#string-to-integer-atoi" class="headerlink" title="string to integer atoi"></a>string to integer atoi</h2><p>Implement atoi to convert a string to an integer.<br>Hint: Carefully consider all possible input cases. If you want a challenge, please do not see below and ask yourself what are the possible input cases.<br>Notes: It is intended for this problem to be specified vaguely (ie, no given input specs). You are responsible to gather all the input requirements up front.<br>spoilers alert… click to show requirements for atoi.<br>Requirements for atoi:<br>The function first discards as many whitespace characters as necessary until the first non-whitespace character is found. Then, starting from this character, takes an optional initial plus or minus sign followed by as many numerical digits as possible, and interprets them as a numerical value.<br>The string can contain additional characters after those that form the integral number, which are ignored and have no effect on the behavior of this function.<br>If the first sequence of non-whitespace characters in str is not a valid integral number, or if no such sequence exists because either str is empty or it contains only whitespace characters, no conversion is performed.<br>If no valid conversion could be performed, a zero value is returned. If the correct value is out of the range of representable values, INT_MAX (2147483647) or INT_MIN (-2147483648) is returned.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">atoi</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *str)</span> </span>&#123;</div><div class="line">        <span class="keyword">long</span> <span class="keyword">long</span> res = <span class="number">0</span>;</div><div class="line">        <span class="keyword">if</span> (str == <span class="literal">NULL</span>)&#123;</div><div class="line">            <span class="keyword">return</span> res;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">int</span> len = <span class="built_in">strlen</span>(str);</div><div class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">bool</span> neg = <span class="literal">false</span>;</div><div class="line">        </div><div class="line">        <span class="keyword">while</span> (str[i] == <span class="string">' '</span>|| str[i] == <span class="string">'0'</span>)&#123;</div><div class="line">            ++i;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> (str[i] == <span class="string">'-'</span>)&#123;</div><div class="line">            </div><div class="line">            neg = <span class="literal">true</span>;</div><div class="line">            ++i;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (str[i] == <span class="string">'+'</span>)&#123;</div><div class="line">            neg = <span class="literal">false</span>;</div><div class="line">            ++i;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">for</span> (;i &lt; len;++i)&#123;</div><div class="line">            <span class="keyword">char</span> ch = str[i];</div><div class="line">            <span class="keyword">if</span> (ch &gt;=<span class="string">'0'</span> &amp;&amp; ch &lt;=<span class="string">'9'</span>)&#123;</div><div class="line">                res = res*<span class="number">10</span> + ch - <span class="string">'0'</span>;</div><div class="line">                </div><div class="line">                <span class="keyword">if</span> (res &gt; INT_MAX)&#123;</div><div class="line">                    <span class="keyword">return</span> neg? INT_MIN:INT_MAX;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                <span class="keyword">if</span> (neg) <span class="keyword">return</span> -res;</div><div class="line">        		<span class="keyword">return</span> res;   </div><div class="line">            &#125;</div><div class="line">            </div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> (neg) <span class="keyword">return</span> -res;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="merge-two-sorted-lists"><a href="#merge-two-sorted-lists" class="headerlink" title="merge two sorted lists"></a>merge two sorted lists</h2><p>Merge two sorted linked lists and return it as a new list. The new list should be made by splicing together the nodes of the first two lists.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Definition for singly-linked list.</div><div class="line"> * struct ListNode &#123;</div><div class="line"> *     int val;</div><div class="line"> *     ListNode *next;</div><div class="line"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</div><div class="line"> * &#125;;</div><div class="line"> */</div><div class="line"><span class="keyword">class</span> Solution &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function">ListNode *<span class="title">mergeTwoLists</span><span class="params">(ListNode *l1, ListNode *l2)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (l1 == <span class="literal">NULL</span>) <span class="keyword">return</span> l2;</div><div class="line">        <span class="keyword">if</span> (l2 == <span class="literal">NULL</span>) <span class="keyword">return</span> l1;</div><div class="line">        </div><div class="line">        ListNode * dummy = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</div><div class="line">        ListNode * p = dummy;</div><div class="line">        </div><div class="line">        <span class="keyword">while</span>(l1!=<span class="literal">NULL</span> &amp;&amp; l2!=<span class="literal">NULL</span>)&#123;</div><div class="line">            <span class="keyword">if</span> (l1-&gt;val &lt; l2-&gt;val)&#123;</div><div class="line">                p-&gt;next = l1;</div><div class="line">                l1 = l1-&gt;next;</div><div class="line">            &#125;<span class="keyword">else</span> &#123;</div><div class="line">                p -&gt; next = l2;</div><div class="line">                l2 = l2 -&gt; next;</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            p = p -&gt;next;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span>(l1!= <span class="literal">NULL</span>)&#123;</div><div class="line">            p -&gt; next = l1;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(l2!= <span class="literal">NULL</span>)&#123;</div><div class="line">            p -&gt; next = l2;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">return</span> dummy -&gt; next;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>##</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">Leetcode</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/04/07/Leetcode/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-Glossary-of-Conformal-Geometry-Related" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/31/Glossary-of-Conformal-Geometry-Related/">Glossary of Conformal Geometry Related</a>
    </h1>
  

        
        <a href="/2017/03/31/Glossary-of-Conformal-Geometry-Related/" class="archive-article-date">
  	<time datetime="2017-03-31T07:58:13.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-03-31</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Glossary"><a href="#Glossary" class="headerlink" title="Glossary"></a>Glossary</h1><h2 id="manifold-流形"><a href="#manifold-流形" class="headerlink" title="manifold(流形)"></a>manifold(流形)</h2><p>流形是局部具有欧几里得空间性质的空间，流形在数学中用于描述几何形体，物理上，经典力学的相空间和构造广义相对论的时空模型的四维伪黎曼流形都是流形的实例。</p>
<h2 id="homeomorphism-同胚"><a href="#homeomorphism-同胚" class="headerlink" title="homeomorphism(同胚)"></a>homeomorphism(同胚)</h2><p>在拓扑学中，两个流形，如果可以通过弯曲、延展、剪切(只要最终完全沿着当初剪开的缝隙再重新粘贴起来)等操作把其中一个变为另一个，则认为两者是同胚的。如：圆和正方形是同胚的，而球面和环面就不是同胚的。</p>
<p>同胚映射：设X和Y是拓扑空间。如果f：X→Y是一一映射，并且f及其逆g：Y→X都是连续的，则称f是一个同胚映射，或称拓扑变换，或简称同胚。</p>
<p>同胚：当存在X到Y的同胚映射时，称X与Y同胚。记作X≌Y。</p>
<h2 id="diffeomorphism-微分同胚"><a href="#diffeomorphism-微分同胚" class="headerlink" title="diffeomorphism(微分同胚)"></a>diffeomorphism(微分同胚)</h2><p>对维度小于3的流形，可证明同胚的流形必为微分同胚；换言之，此时流形上的拓扑结构确定了微分结构。</p>
<h2 id="biholomorphic"><a href="#biholomorphic" class="headerlink" title="biholomorphic"></a>biholomorphic</h2><h2 id="curl（旋度）"><a href="#curl（旋度）" class="headerlink" title="curl（旋度）"></a>curl（旋度）</h2><h2 id="div（散度）"><a href="#div（散度）" class="headerlink" title="div（散度）"></a>div（散度）</h2><h2 id="Half-edge-data-structure"><a href="#Half-edge-data-structure" class="headerlink" title="Half-edge data structure"></a>Half-edge data structure</h2><h3 id="Dual"><a href="#Dual" class="headerlink" title="Dual"></a>Dual</h3>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">Conformal Geometry</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/03/31/Glossary-of-Conformal-Geometry-Related/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-Using-HEXO-to-write-blogs" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/28/Using-HEXO-to-write-blogs/">Using HEXO to write blogs</a>
    </h1>
  

        
        <a href="/2017/03/28/Using-HEXO-to-write-blogs/" class="archive-article-date">
  	<time datetime="2017-03-28T15:34:59.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-03-28</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Hexo is a fast, simple and powerful blog framework. And we can use Markdown to write it, so it is very efficient. I migrate the old blogs to this theme.</p>
        
          <a class="article-more-a" href="/2017/03/28/Using-HEXO-to-write-blogs/#more">more >></a>
        
      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">Blog</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/03/28/Using-HEXO-to-write-blogs/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-Install-Tensorflow-from-Source-Code" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/19/Install-Tensorflow-from-Source-Code/">Install Tensorflow from Source Code</a>
    </h1>
  

        
        <a href="/2016/08/19/Install-Tensorflow-from-Source-Code/" class="archive-article-date">
  	<time datetime="2016-08-19T03:55:45.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-08-19</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Install-bazel"><a href="#Install-bazel" class="headerlink" title="Install bazel"></a>Install bazel</h2><h3 id="Install-java-jdk"><a href="#Install-java-jdk" class="headerlink" title="Install java jdk"></a>Install java jdk</h3><p>Required Java version:</p>
<ul>
<li>Java JDK 8 or later (JDK 7 is still supported but deprecated).</li>
</ul>
<p>In centos we can simply install this by command:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install -y java-1.8.0-openjdk</div></pre></td></tr></table></figure></p>
<p>set <code>JAVA_HOME</code> environment variables in <code>.bashrc</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">export JAVA_HOME=/usr/lib/jvm/java-openjdk</div></pre></td></tr></table></figure>
<h3 id="Download-bazel-source-code"><a href="#Download-bazel-source-code" class="headerlink" title="Download bazel source code"></a>Download bazel source code</h3><p>Download from github and compile:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git clone https://github.com/bazelbuild/bazel.git</div><div class="line">cd bazel</div><div class="line">./compile.sh</div></pre></td></tr></table></figure>
<h3 id="Set-bazel-to-PATH"><a href="#Set-bazel-to-PATH" class="headerlink" title="Set bazel to PATH"></a>Set bazel to PATH</h3><p>ADD <code>bazel-bin/src/bazel</code> to <code>.bashrc</code></p>
<p>In my server as:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">export PATH=$PATH:/root/bazel/output</div></pre></td></tr></table></figure>
<p>Now, we have install the bazel in centos.</p>
<p>If you use Ubuntu OS, you can install it form apt repository. In this blog, I will not tell the detailed, which you can reference the link:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://bazel.io/docs/install.html#compiling-from-source</div></pre></td></tr></table></figure>
<h2 id="Install-Tensorflow"><a href="#Install-Tensorflow" class="headerlink" title="Install Tensorflow"></a>Install Tensorflow</h2><h3 id="Download-source-code"><a href="#Download-source-code" class="headerlink" title="Download source code"></a>Download source code</h3><p>Clone the tensorflow from github:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clone https://github.com/tensorflow/tensorflow</div></pre></td></tr></table></figure>
<h3 id="Configure-for-installation"><a href="#Configure-for-installation" class="headerlink" title="Configure for installation"></a>Configure for installation</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd tensorflow/</div><div class="line">./configure</div></pre></td></tr></table></figure>
<p>Then, it will tell you which environment to set. such as:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">Please specify the location of python. [Default is /usr/local/anaconda2/bin/python]: </div><div class="line">Do you wish to build TensorFlow with Google Cloud Platform support? [y/N] n</div><div class="line">No Google Cloud Platform support will be enabled for TensorFlow</div><div class="line">Found possible Python library paths:</div><div class="line">  /usr/local/anaconda2/lib/python2.7/site-packages</div><div class="line">Please input the desired Python library path to use.  Default is [/usr/local/anaconda2/lib/python2.7/site-packages]</div><div class="line"></div><div class="line">/usr/local/anaconda2/lib/python2.7/site-packages</div><div class="line">Do you wish to build TensorFlow with GPU support? [y/N] y</div><div class="line">GPU support will be enabled for TensorFlow</div><div class="line">Please specify which gcc should be used by nvcc as the host compiler. [Default is /usr/bin/gcc]: </div><div class="line">Please specify the Cuda SDK version you want to use, e.g. 7.0. [Leave empty to use system default]: </div><div class="line">Please specify the location where CUDA  toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: </div><div class="line">Please specify the Cudnn version you want to use. [Leave empty to use system default]: </div><div class="line">Please specify the location where cuDNN  library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: </div><div class="line">Please specify a list of comma-separated Cuda compute capabilities you want to build with.</div><div class="line">You can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.</div><div class="line">Please note that each additional compute capability significantly increases your build time and binary size.</div><div class="line">[Default is: &quot;3.5,5.2&quot;]: </div><div class="line">Setting up Cuda include</div><div class="line">Setting up Cuda lib64</div><div class="line">Setting up Cuda bin</div><div class="line">Setting up Cuda nvvm</div><div class="line">Setting up CUPTI include</div><div class="line">Setting up CUPTI lib64</div><div class="line">Configuration finished</div></pre></td></tr></table></figure>
<h3 id="Create-the-pip-package-and-install"><a href="#Create-the-pip-package-and-install" class="headerlink" title="Create the pip package and install"></a>Create the pip package and install</h3><p>When building from source, you will still build a pip package and install that.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># To build with GPU support:</div><div class="line">bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package</div><div class="line">bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg</div><div class="line">pip install /tmp/tensorflow_pkg/tensorflow-0.10.0rc0-py2-none-any.whl</div></pre></td></tr></table></figure>
<h3 id="Setting-up-TensorFlow-for-Development"><a href="#Setting-up-TensorFlow-for-Development" class="headerlink" title="Setting up TensorFlow for Development"></a>Setting up TensorFlow for Development</h3><p>If you’re working on TensorFlow itself, it is useful to be able to test your changes in an interactive python shell without having to reinstall TensorFlow.</p>
<p>To set up TensorFlow such that all files are linked (instead of copied) from the system directories, run the following commands inside the TensorFlow root directory:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">bazel build -c opt //tensorflow/tools/pip_package:build_pip_package</div><div class="line"></div><div class="line"><span class="comment"># To build with GPU support:</span></div><div class="line">bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package</div><div class="line"></div><div class="line">mkdir _python_build</div><div class="line"><span class="built_in">cd</span> _python_build</div><div class="line">ln <span class="_">-s</span> ../bazel-bin/tensorflow/tools/pip_package/build_pip_package.runfiles/org_tensorflow/* .</div><div class="line">ln <span class="_">-s</span> ../tensorflow/tools/pip_package/* .</div></pre></td></tr></table></figure>
<p>Such as change the version from 0.10.0 to 0.11.0 file<code>tensorflow/tools/pip_package/setup.py</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">_VERSION = <span class="string">'0.11.0rc0'</span></div></pre></td></tr></table></figure>
<p>Then, do the following:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">python setup.py develop</div></pre></td></tr></table></figure></p>
<p>Now, we can build our develop tensorflow:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg</div><div class="line">pip install /tmp/tensorflow_pkg/tensorflow-0.11.0rc0-py2-none-any.whl</div></pre></td></tr></table></figure>
<h2 id="Verify-the-installation"><a href="#Verify-the-installation" class="headerlink" title="Verify the installation"></a>Verify the installation</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@node-4 site-packages]<span class="comment"># pip show tensorflow</span></div><div class="line"></div><div class="line">Metadata-Version: 2.0</div><div class="line">Name: tensorflow</div><div class="line">Version: 0.11.0rc0</div><div class="line">Summary: TensorFlow helps the tensors flow</div><div class="line">Home-page: http://tensorflow.org/</div><div class="line">Author: Google Inc.</div><div class="line">Author-email: opensource@google.com</div><div class="line">Installer: pip</div><div class="line">License: Apache 2.0</div><div class="line">Location: /usr/<span class="built_in">local</span>/anaconda2/lib/python2.7/site-packages</div><div class="line">Requires: numpy, mock, protobuf, wheel, six</div></pre></td></tr></table></figure>
<p>We can find the version changed from the <code>0.10.0tc0</code> to <code>0.11.0rc0</code>.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>official link:<a href="https://github.com/tensorflow/tensorflow/blob/master/tensorflow/g3doc/get_started/os_setup.md#installing-from-sources" target="_blank" rel="external">this</a>.</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">Deep Learning</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2016/08/19/Install-Tensorflow-from-Source-Code/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-Play-distributed-Tensorflow-with-GPU-accelerated" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/25/Play-distributed-Tensorflow-with-GPU-accelerated/">Play distributed Tensorflow with GPU accelerated</a>
    </h1>
  

        
        <a href="/2016/04/25/Play-distributed-Tensorflow-with-GPU-accelerated/" class="archive-article-date">
  	<time datetime="2016-04-25T03:55:21.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2016-04-25</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>TensorFlow™ is an open source software library for numerical computation using data flow graphs.</p>
<p>TensorFlow is for everyone. It’s for students, researchers, hobbyists, hackers, engineers, developers, inventors and innovators and is being open sourced under the Apache 2.0 open source license.</p>
<h3 id="Distributed-version"><a href="#Distributed-version" class="headerlink" title="Distributed version"></a>Distributed version</h3><p>In April 13,2006.Distributed version of Tensorflow was published.</p>
<p><a href="http://googleresearch.blogspot.com/2016/04/announcing-tensorflow-08-now-with.html" target="_blank" rel="external">Announcing TensorFlow 0.8 – now with distributed computing support!</a></p>
<p>This blog is also reposted by <a href="https://plus.google.com/u/0/+JeffDean" target="_blank" rel="external">Jeff Dean</a> in G+ who is the Google Senior Fellow in the Systems Infrastructure Group.</p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>I try the distributed version in 3 virtual machines on OpenStack platform which is a famous open source cloud OS.</p>
<h3 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h3><ul>
<li>1 master node</li>
<li>2 worker nodes</li>
<li>Configuration:4GB RAM, 2 VCPU, 40.0GB Disk</li>
<li>Operating System:ubuntu-14.04-server-cloudimg-amd64</li>
<li>Python version:2.7</li>
<li>Tensorflow version:r0.8</li>
<li>vCPU only.</li>
</ul>
<h3 id="Install-pip"><a href="#Install-pip" class="headerlink" title="Install pip"></a>Install pip</h3><ol>
<li>Download <a href="https://bootstrap.pypa.io/get-pip.py" target="_blank" rel="external">get-pip.py</a> file.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget https://bootstrap.pypa.io/get-pip.py</div></pre></td></tr></table></figure>
<ol>
<li>Install the pip behind a proxy</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">python get-pip.py --proxy=&quot;[user:passwd@]proxy.server:port&quot;</div></pre></td></tr></table></figure>
<ol>
<li>Upgrading pip</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install -U pip</div></pre></td></tr></table></figure>
<h3 id="Install-Tensorflow-by-pip"><a href="#Install-Tensorflow-by-pip" class="headerlink" title="Install Tensorflow by pip"></a>Install Tensorflow by pip</h3><ol>
<li>Ubuntu/Linux 64-bit, GPU enabled. Requires CUDA toolkit 7.5 and CuDNN v4.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo pip install --upgrade https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.8.0-cp27-none-linux_x86_64.whl</div></pre></td></tr></table></figure>
<ol>
<li>Ubuntu/Linux 64-bit, CPU only:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo pip install --upgrade https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.8.0-cp27-none-linux_x86_64.whl</div></pre></td></tr></table></figure>
<h2 id="Demo-of-Distributed-TensorFlow"><a href="#Demo-of-Distributed-TensorFlow" class="headerlink" title="Demo of Distributed TensorFlow"></a>Demo of Distributed TensorFlow</h2><p>Now we have setup the preparation for a demo. This demo is according to the tutorial of Tensorflow.</p>
<p><a href="https://www.tensorflow.org/versions/r0.8/how_tos/distributed/index.html" target="_blank" rel="external">https://www.tensorflow.org/versions/r0.8/how_tos/distributed/index.html</a></p>
<h3 id="Describe-of-a-cluster"><a href="#Describe-of-a-cluster" class="headerlink" title="Describe of a cluster"></a>Describe of a cluster</h3><p>A TensorFlow “cluster” is a set of “tasks” that participate in the distributed execution of a TensorFlow graph. Each task is associated with a TensorFlow “server”, which contains a “master” that can be used to create sessions, and a “worker” that executes operations in the graph. A cluster can also be divided into one or more “jobs”, where each job contains one or more tasks.</p>
<h4 id="Two-important-instrucions"><a href="#Two-important-instrucions" class="headerlink" title="Two important instrucions"></a>Two important instrucions</h4><p>Create a <code>tf.train.ClusterSpec</code> that describes all of the tasks in the cluster. This should be the same for each task.</p>
<p>Create a <code>tf.train.Server</code>, passing the tf.train.ClusterSpec to the constructor, and identifying the local task with a job name and task index.</p>
<h4 id="Specific-a-cluster"><a href="#Specific-a-cluster" class="headerlink" title="Specific a cluster"></a>Specific a cluster</h4><p>We define 2 worker node and 1 parameter server node as the following:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cluster = tf.train.ClusterSpec(&#123;&quot;worker&quot;: [&quot;tensorflow-worker0:2222&quot;,</div><div class="line">                                           &quot;tensorflow-worker1:2222&quot;],</div><div class="line">                                &quot;ps&quot;: [&quot;tensorflow-master0:2222&quot;]&#125;)</div></pre></td></tr></table></figure>
<h4 id="master-node"><a href="#master-node" class="headerlink" title="master node"></a>master node</h4><ol>
<li>Write <code>ps.py</code> as the following for parameter server:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">import tensorflow as tf</div><div class="line"></div><div class="line">cluster = tf.train.ClusterSpec(&#123;&quot;worker&quot;: [&quot;tensorflow-worker0:2222&quot;,</div><div class="line">                                           &quot;tensorflow-worker1:2222&quot;],</div><div class="line">                                &quot;ps&quot;: [&quot;tensorflow-master0:2222&quot;]&#125;)</div><div class="line">server = tf.train.Server(cluster,</div><div class="line">                          job_name=&quot;ps&quot;,</div><div class="line">                          task_index=0)</div><div class="line">server.join()</div></pre></td></tr></table></figure>
<ol>
<li>Run the script</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># python ps.py </div><div class="line">I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -&gt; &#123;localhost:2222&#125;</div><div class="line">I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -&gt; &#123;tensorflow-worker0:2222, tensorflow-worker1:2222&#125;</div><div class="line">I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2222</div></pre></td></tr></table></figure>
<p>It will listen on the 2222 port of master0 server.</p>
<h4 id="worker-node"><a href="#worker-node" class="headerlink" title="worker node"></a>worker node</h4><p>In the two worker nodes, do the following steps:</p>
<ol>
<li>Write <code>worker0.py</code> as the following:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">import tensorflow as tf</div><div class="line"></div><div class="line">cluster = tf.train.ClusterSpec(&#123;&quot;worker&quot;: [&quot;tensorflow-worker0:2222&quot;,</div><div class="line">                                           &quot;tensorflow-worker1:2222&quot;],</div><div class="line">                                &quot;ps&quot;: [&quot;tensorflow-master0:2222&quot;]&#125;)</div><div class="line">server = tf.train.Server(cluster,</div><div class="line">                          job_name=&quot;worker&quot;,</div><div class="line">                          task_index=0)</div><div class="line">server.join()</div></pre></td></tr></table></figure>
<ol>
<li>Run the script</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># python worker0.py </div><div class="line">I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -&gt; &#123;tensorflow-master0:2222&#125;</div><div class="line">I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -&gt; &#123;localhost:2222, tensorflow-worker1:2222&#125;</div><div class="line">I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2222</div></pre></td></tr></table></figure>
<p>It will listen on the 2222 port of worker0 server.</p>
<ol>
<li>Write <code>worker1.py</code> as the following:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">import tensorflow as tf</div><div class="line"></div><div class="line">cluster = tf.train.ClusterSpec(&#123;&quot;worker&quot;: [&quot;tensorflow-worker0:2222&quot;,</div><div class="line">                                           &quot;tensorflow-worker1:2222&quot;],</div><div class="line">                                &quot;ps&quot;: [&quot;tensorflow-master0:2222&quot;]&#125;)</div><div class="line">server = tf.train.Server(cluster,</div><div class="line">                          job_name=&quot;worker&quot;,</div><div class="line">                          task_index=1)</div><div class="line">server.join()</div></pre></td></tr></table></figure>
<ol>
<li>Run the script</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># python worker1.py </div><div class="line">I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -&gt; &#123;tensorflow-master0:2222&#125;</div><div class="line">I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -&gt; &#123;tensorflow-worker0:2222, localhost:2222&#125;</div><div class="line">I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2222</div></pre></td></tr></table></figure>
<p>It will listen on the 2222 port of worker1 server.</p>
<h3 id="Test-Job-Task"><a href="#Test-Job-Task" class="headerlink" title="Test Job Task"></a>Test Job Task</h3><ol>
<li>The test job script is the following:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">import tensorflow as tf</div><div class="line"></div><div class="line">with tf.device(&quot;/job:ps/task:0&quot;):</div><div class="line">    weights0 = tf.Variable(tf.random_normal(shape=[1024, 512]))</div><div class="line">    bias0 = tf.Variable(tf.zeros(shape=[512]))</div><div class="line"></div><div class="line">with tf.device(&quot;/job:worker/task:1&quot;):</div><div class="line">    inputs = tf.random_normal(shape=[10, 1024])</div><div class="line">    l0 = tf.nn.relu(tf.matmul(inputs, weights0) + bias0)</div><div class="line">    l1 = tf.nn.relu(tf.matmul(l0, tf.transpose(weights0)))</div><div class="line">    loss = tf.nn.l2_loss(l1-inputs)</div><div class="line">    train_op = tf.train.AdamOptimizer().minimize(loss)</div><div class="line"></div><div class="line">with tf.Session(&quot;grpc://tensorflow-master0:2222&quot;) as sess:</div><div class="line">   for _ in range(1000):</div><div class="line">       sess.run(tf.initialize_all_variables())</div><div class="line">       _, l = sess.run([train_op, loss])</div><div class="line">       print l</div></pre></td></tr></table></figure>
<ul>
<li>ps node is to generate normal random variables.</li>
<li>worker node is to training the model.</li>
</ul>
<ol>
<li>Results</li>
</ol>
<p>When run the script, it will generate data in <code>device: &quot;/job:ps/task:0&quot;</code> and train the data in <code>device=/job:worker/task:1</code> as the following:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"># python job.py </div><div class="line">name: &quot;Adam&quot;</div><div class="line">op: &quot;NoOp&quot;</div><div class="line">input: &quot;^Adam/update_Variable/ApplyAdam&quot;</div><div class="line">input: &quot;^Adam/update_Variable_1/ApplyAdam&quot;</div><div class="line">input: &quot;^Adam/Assign&quot;</div><div class="line">input: &quot;^Adam/Assign_1&quot;</div><div class="line">device: &quot;/job:ps/task:0&quot;</div><div class="line"> Tensor(&quot;L2Loss:0&quot;, shape=(), dtype=float32, device=/job:worker/task:1)</div><div class="line">name: &quot;Adam&quot;</div><div class="line">op: &quot;NoOp&quot;</div><div class="line">input: &quot;^Adam/update_Variable/ApplyAdam&quot;</div><div class="line">input: &quot;^Adam/update_Variable_1/ApplyAdam&quot;</div><div class="line">input: &quot;^Adam/Assign&quot;</div><div class="line">input: &quot;^Adam/Assign_1&quot;</div><div class="line">device: &quot;/job:ps/task:0&quot;</div><div class="line"> Tensor(&quot;L2Loss:0&quot;, shape=(), dtype=float32, device=/job:worker/task:1)</div><div class="line">name: &quot;Adam&quot;</div><div class="line">op: &quot;NoOp&quot;</div><div class="line">input: &quot;^Adam/update_Variable/ApplyAdam&quot;</div><div class="line">input: &quot;^Adam/update_Variable_1/ApplyAdam&quot;</div><div class="line">input: &quot;^Adam/Assign&quot;</div><div class="line">input: &quot;^Adam/Assign_1&quot;</div><div class="line">device: &quot;/job:ps/task:0&quot;</div><div class="line"> Tensor(&quot;L2Loss:0&quot;, shape=(), dtype=float32, device=/job:worker/task:1)</div><div class="line">name: &quot;Adam&quot;</div><div class="line">op: &quot;NoOp&quot;</div><div class="line">input: &quot;^Adam/update_Variable/ApplyAdam&quot;</div><div class="line">input: &quot;^Adam/update_Variable_1/ApplyAdam&quot;</div><div class="line">input: &quot;^Adam/Assign&quot;</div><div class="line">input: &quot;^Adam/Assign_1&quot;</div><div class="line">device: &quot;/job:ps/task:0&quot;</div><div class="line">...</div></pre></td></tr></table></figure>
<h2 id="Further-Work"><a href="#Further-Work" class="headerlink" title="Further Work"></a>Further Work</h2><p>This blog is only a try of distributed tensorflow, there are many works need to do. such as how to combined working with GPU, how to benchmark and so on.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.tensorflow.org" target="_blank" rel="external">https://www.tensorflow.org</a></p>
<p><a href="https://github.com/tensorflow/tensorflow" target="_blank" rel="external">https://github.com/tensorflow/tensorflow</a></p>
<p><a href="http://googleresearch.blogspot.com/2016/04/announcing-tensorflow-08-now-with.html" target="_blank" rel="external">http://googleresearch.blogspot.com/2016/04/announcing-tensorflow-08-now-with.html</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">Deep Learning</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2016/04/25/Play-distributed-Tensorflow-with-GPU-accelerated/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018 Pengfei Shi
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="./",n(0)}([function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var e=/\/|index.html/g;return t.replace(e,"")===n.replace(e,"")}function i(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,e=0,r=t.length;e<r;e++){var i=t[e];o(n,i.getAttribute("href"))&&(0,d.default)(i,"active")}}function u(t){for(var n=t.offsetLeft,e=t.offsetParent;null!==e;)n+=e.offsetLeft,e=e.offsetParent;return n}function f(t){for(var n=t.offsetTop,e=t.offsetParent;null!==e;)n+=e.offsetTop,e=e.offsetParent;return n}function c(t,n,e,r,o){var i=u(t),c=f(t)-n;if(c-e<=o){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,h.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(e||c)+"px",a.style.left=i+"px",a.style.zIndex=r||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");c(t,document.body.scrollTop,-63,2,0),c(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}function l(){x.default.versions.mobile&&window.screen.width<800&&(i(),s())}var p=e(71),d=r(p),v=e(72),y=(r(v),e(84)),h=r(y),b=e(69),x=r(b),m=e(75),g=r(m),w=e(70);l(),(0,w.addLoadEvent)(function(){g.default.init()}),t.exports={}},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(49),o=e(15);t.exports=function(t){return r(o(t))}},function(t,n,e){t.exports=!e(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,e){var r=e(6),o=e(12);t.exports=e(4)?function(t,n,e){return r.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(10),o=e(30),i=e(24),u=Object.defineProperty;n.f=e(4)?Object.defineProperty:function(t,n,e){if(r(t),n=i(n,!0),r(e),o)try{return u(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){var r=e(22)("wks"),o=e(13),i=e(1).Symbol,u="function"==typeof i,f=t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))};f.store=r},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,e){var r=e(35),o=e(16);t.exports=Object.keys||function(t){return r(t,o)}},function(t,n,e){var r=e(11);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,e){var r=e(6).f,o=e(2),i=e(7)("toStringTag");t.exports=function(t,n,e){t&&!o(t=e?t:t.prototype,i)&&r(t,i,{configurable:!0,value:n})}},function(t,n,e){var r=e(22)("keys"),o=e(13);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,n,e){var r=e(1),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(11);t.exports=function(t,n){if(!r(t))return t;var e,o;if(n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;if("function"==typeof(e=t.valueOf)&&!r(o=e.call(t)))return o;if(!n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n,e){var r=e(1),o=e(14),i=e(18),u=e(26),f=e(6).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in n||f(n,t,{value:u.f(t)})}},function(t,n,e){n.f=e(7)},function(t,n,e){var r=e(1),o=e(14),i=e(46),u=e(5),f="prototype",c=function(t,n,e){var a,s,l,p=t&c.F,d=t&c.G,v=t&c.S,y=t&c.P,h=t&c.B,b=t&c.W,x=d?o:o[n]||(o[n]={}),m=x[f],g=d?r:v?r[n]:(r[n]||{})[f];d&&(e=n);for(a in e)s=!p&&g&&void 0!==g[a],s&&a in x||(l=s?g[a]:e[a],x[a]=d&&"function"!=typeof g[a]?e[a]:h&&s?i(l,r):b&&g[a]==l?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n[f]=t[f],n}(l):y&&"function"==typeof l?i(Function.call,l):l,y&&((x.virtual||(x.virtual={}))[a]=l,t&c.R&&m&&!m[a]&&u(m,a,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n,e){var r=e(11),o=e(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,n,e){t.exports=!e(4)&&!e(8)(function(){return 7!=Object.defineProperty(e(29)("div"),"a",{get:function(){return 7}}).a})},function(t,n,e){"use strict";var r=e(18),o=e(27),i=e(36),u=e(5),f=e(2),c=e(17),a=e(51),s=e(20),l=e(58),p=e(7)("iterator"),d=!([].keys&&"next"in[].keys()),v="@@iterator",y="keys",h="values",b=function(){return this};t.exports=function(t,n,e,x,m,g,w){a(e,n,x);var O,S,_,j=function(t){if(!d&&t in A)return A[t];switch(t){case y:return function(){return new e(this,t)};case h:return function(){return new e(this,t)}}return function(){return new e(this,t)}},P=n+" Iterator",E=m==h,M=!1,A=t.prototype,T=A[p]||A[v]||m&&A[m],L=T||j(m),N=m?E?j("entries"):L:void 0,C="Array"==n?A.entries||T:T;if(C&&(_=l(C.call(new t)),_!==Object.prototype&&(s(_,P,!0),r||f(_,p)||u(_,p,b))),E&&T&&T.name!==h&&(M=!0,L=function(){return T.call(this)}),r&&!w||!d&&!M&&A[p]||u(A,p,L),c[n]=L,c[P]=b,m)if(O={values:E?L:j(h),keys:g?L:j(y),entries:N},w)for(S in O)S in A||i(A,S,O[S]);else o(o.P+o.F*(d||M),n,O);return O}},function(t,n,e){var r=e(10),o=e(55),i=e(16),u=e(21)("IE_PROTO"),f=function(){},c="prototype",a=function(){var t,n=e(29)("iframe"),r=i.length,o="<",u=">";for(n.style.display="none",e(48).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+u+"document.F=Object"+o+"/script"+u),t.close(),a=t.F;r--;)delete a[c][i[r]];return a()};t.exports=Object.create||function(t,n){var e;return null!==t?(f[c]=r(t),e=new f,f[c]=null,e[u]=t):e=a(),void 0===n?e:o(e,n)}},function(t,n,e){var r=e(35),o=e(16).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){var r=e(2),o=e(3),i=e(45)(!1),u=e(21)("IE_PROTO");t.exports=function(t,n){var e,f=o(t),c=0,a=[];for(e in f)e!=u&&r(f,e)&&a.push(e);for(;n.length>c;)r(f,e=n[c++])&&(~i(a,e)||a.push(e));return a}},function(t,n,e){t.exports=e(5)},function(t,n,e){var r=e(15);t.exports=function(t){return Object(r(t))}},function(t,n,e){t.exports={default:e(41),__esModule:!0}},function(t,n,e){t.exports={default:e(42),__esModule:!0}},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var o=e(39),i=r(o),u=e(38),f=r(u),c="function"==typeof f.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":typeof t};n.default="function"==typeof f.default&&"symbol"===c(i.default)?function(t){return"undefined"==typeof t?"undefined":c(t)}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":"undefined"==typeof t?"undefined":c(t)}},function(t,n,e){e(65),e(63),e(66),e(67),t.exports=e(14).Symbol},function(t,n,e){e(64),e(68),t.exports=e(26).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,e){var r=e(3),o=e(61),i=e(60);t.exports=function(t){return function(n,e,u){var f,c=r(n),a=o(c.length),s=i(u,a);if(t&&e!=e){for(;a>s;)if(f=c[s++],f!=f)return!0}else for(;a>s;s++)if((t||s in c)&&c[s]===e)return t||s||0;return!t&&-1}}},function(t,n,e){var r=e(43);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}}},function(t,n,e){var r=e(9),o=e(34),i=e(19);t.exports=function(t){var n=r(t),e=o.f;if(e)for(var u,f=e(t),c=i.f,a=0;f.length>a;)c.call(t,u=f[a++])&&n.push(u);return n}},function(t,n,e){t.exports=e(1).document&&document.documentElement},function(t,n,e){var r=e(28);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(28);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){"use strict";var r=e(32),o=e(12),i=e(20),u={};e(5)(u,e(7)("iterator"),function(){return this}),t.exports=function(t,n,e){t.prototype=r(u,{next:o(1,e)}),i(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,e){var r=e(9),o=e(3);t.exports=function(t,n){for(var e,i=o(t),u=r(i),f=u.length,c=0;f>c;)if(i[e=u[c++]]===n)return e}},function(t,n,e){var r=e(13)("meta"),o=e(11),i=e(2),u=e(6).f,f=0,c=Object.isExtensible||function(){return!0},a=!e(8)(function(){return c(Object.preventExtensions({}))}),s=function(t){u(t,r,{value:{i:"O"+ ++f,w:{}}})},l=function(t,n){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!n)return"E";s(t)}return t[r].i},p=function(t,n){if(!i(t,r)){if(!c(t))return!0;if(!n)return!1;s(t)}return t[r].w},d=function(t){return a&&v.NEED&&c(t)&&!i(t,r)&&s(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:d}},function(t,n,e){var r=e(6),o=e(10),i=e(9);t.exports=e(4)?Object.defineProperties:function(t,n){o(t);for(var e,u=i(n),f=u.length,c=0;f>c;)r.f(t,e=u[c++],n[e]);return t}},function(t,n,e){var r=e(19),o=e(12),i=e(3),u=e(24),f=e(2),c=e(30),a=Object.getOwnPropertyDescriptor;n.f=e(4)?a:function(t,n){if(t=i(t),n=u(n,!0),c)try{return a(t,n)}catch(t){}if(f(t,n))return o(!r.f.call(t,n),t[n])}},function(t,n,e){var r=e(3),o=e(33).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?f(t):o(r(t))}},function(t,n,e){var r=e(2),o=e(37),i=e(21)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,e){var r=e(23),o=e(15);t.exports=function(t){return function(n,e){var i,u,f=String(o(n)),c=r(e),a=f.length;return c<0||c>=a?t?"":void 0:(i=f.charCodeAt(c),i<55296||i>56319||c+1===a||(u=f.charCodeAt(c+1))<56320||u>57343?t?f.charAt(c):i:t?f.slice(c,c+2):(i-55296<<10)+(u-56320)+65536)}}},function(t,n,e){var r=e(23),o=Math.max,i=Math.min;t.exports=function(t,n){return t=r(t),t<0?o(t+n,0):i(t,n)}},function(t,n,e){var r=e(23),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,n,e){"use strict";var r=e(44),o=e(52),i=e(17),u=e(3);t.exports=e(31)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,o(1)):"keys"==n?o(0,e):"values"==n?o(0,t[e]):o(0,[e,t[e]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,n){},function(t,n,e){"use strict";var r=e(59)(!0);e(31)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=r(n,e),this._i+=t.length,{value:t,done:!1})})},function(t,n,e){"use strict";var r=e(1),o=e(2),i=e(4),u=e(27),f=e(36),c=e(54).KEY,a=e(8),s=e(22),l=e(20),p=e(13),d=e(7),v=e(26),y=e(25),h=e(53),b=e(47),x=e(50),m=e(10),g=e(3),w=e(24),O=e(12),S=e(32),_=e(57),j=e(56),P=e(6),E=e(9),M=j.f,A=P.f,T=_.f,L=r.Symbol,N=r.JSON,C=N&&N.stringify,k="prototype",F=d("_hidden"),q=d("toPrimitive"),I={}.propertyIsEnumerable,B=s("symbol-registry"),D=s("symbols"),W=s("op-symbols"),H=Object[k],K="function"==typeof L,R=r.QObject,J=!R||!R[k]||!R[k].findChild,U=i&&a(function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=M(H,n);r&&delete H[n],A(t,n,e),r&&t!==H&&A(H,n,r)}:A,G=function(t){var n=D[t]=S(L[k]);return n._k=t,n},$=K&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},z=function(t,n,e){return t===H&&z(W,n,e),m(t),n=w(n,!0),m(e),o(D,n)?(e.enumerable?(o(t,F)&&t[F][n]&&(t[F][n]=!1),e=S(e,{enumerable:O(0,!1)})):(o(t,F)||A(t,F,O(1,{})),t[F][n]=!0),U(t,n,e)):A(t,n,e)},Y=function(t,n){m(t);for(var e,r=b(n=g(n)),o=0,i=r.length;i>o;)z(t,e=r[o++],n[e]);return t},Q=function(t,n){return void 0===n?S(t):Y(S(t),n)},X=function(t){var n=I.call(this,t=w(t,!0));return!(this===H&&o(D,t)&&!o(W,t))&&(!(n||!o(this,t)||!o(D,t)||o(this,F)&&this[F][t])||n)},V=function(t,n){if(t=g(t),n=w(n,!0),t!==H||!o(D,n)||o(W,n)){var e=M(t,n);return!e||!o(D,n)||o(t,F)&&t[F][n]||(e.enumerable=!0),e}},Z=function(t){for(var n,e=T(g(t)),r=[],i=0;e.length>i;)o(D,n=e[i++])||n==F||n==c||r.push(n);return r},tt=function(t){for(var n,e=t===H,r=T(e?W:g(t)),i=[],u=0;r.length>u;)!o(D,n=r[u++])||e&&!o(H,n)||i.push(D[n]);return i};K||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),n=function(e){this===H&&n.call(W,e),o(this,F)&&o(this[F],t)&&(this[F][t]=!1),U(this,t,O(1,e))};return i&&J&&U(H,t,{configurable:!0,set:n}),G(t)},f(L[k],"toString",function(){return this._k}),j.f=V,P.f=z,e(33).f=_.f=Z,e(19).f=X,e(34).f=tt,i&&!e(18)&&f(H,"propertyIsEnumerable",X,!0),v.f=function(t){return G(d(t))}),u(u.G+u.W+u.F*!K,{Symbol:L});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;nt.length>et;)d(nt[et++]);for(var nt=E(d.store),et=0;nt.length>et;)y(nt[et++]);u(u.S+u.F*!K,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=L(t)},keyFor:function(t){if($(t))return h(B,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){J=!0},useSimple:function(){J=!1}}),u(u.S+u.F*!K,"Object",{create:Q,defineProperty:z,defineProperties:Y,getOwnPropertyDescriptor:V,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),N&&u(u.S+u.F*(!K||a(function(){var t=L();return"[null]"!=C([t])||"{}"!=C({a:t})||"{}"!=C(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!$(t)){for(var n,e,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);return n=r[1],"function"==typeof n&&(e=n),!e&&x(n)||(n=function(t,n){if(e&&(n=e.call(this,t,n)),!$(n))return n}),r[1]=n,C.apply(N,r)}}}),L[k][q]||e(5)(L[k],q,L[k].valueOf),l(L,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,n,e){e(25)("asyncIterator")},function(t,n,e){e(25)("observable")},function(t,n,e){e(62);for(var r=e(1),o=e(5),i=e(17),u=e(7)("toStringTag"),f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var a=f[c],s=r[a],l=s&&s.prototype;l&&!l[u]&&o(l,u,a),i[a]=i.Array}},function(t,n){"use strict";var e={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&t.indexOf("KHTML")==-1,mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:t.indexOf("Safari")==-1,weixin:t.indexOf("MicroMessenger")==-1}}()};t.exports=e},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=e(40),i=r(o),u=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):o[t]||t}function n(t){return l[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,r=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},f=/\u00a0/g,c=/<br\s*\/?>/gi,a=/\r?\n/g,s=/\s/g,l={};for(var p in o)l[o[p]]=p;return o["&apos;"]="'",l["'"]="&#39;",{encode:function(t){return t?(""+t).replace(r,n).replace(a,"<br/>").replace(s,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(c,"\n").replace(e,t).replace(f," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e+=2)n.push(String.fromCharCode("0x"+t.slice(e,e+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,e=t.length;e>n;n++)t[n]=u.encodeObject(t[n]);else if("object"==("undefined"==typeof t?"undefined":(0,i.default)(t)))for(var r in t)t[r]=u.encodeObject(t[r]);else if("string"==typeof t)return u.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=u},function(t,n){function e(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=e},function(t,n){function e(t,n){if(t.classList)t.classList.remove(n);else{var e=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(e," ")}}t.exports=e},,,function(t,n){"use strict";function e(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){var n=document.querySelectorAll(".article-entry a:not(.article-more-a)");n.forEach(function(t){t.setAttribute("target","_blank")})}var e=document.querySelector("#js-aboutme");e&&0!==e.length&&(e.innerHTML=e.innerText)}t.exports={init:e}},,,,,,,,,function(t,n){function e(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var e=t.nextSibling;return e?t.parentNode.insertBefore(n,e):t.parentNode.appendChild(n)}t.exports=e}])</script><script src="/./main.234bc0.js"></script><script>!function(){var e=function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)};e("/slider.885efe.js")}()</script>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">友链</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Conformal Geometry</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Deep Learning</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Leetcode</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Cloud Computing</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">SODA</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">Blog</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">hotkeys</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            2、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: true
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="http://blog.csdn.net/shipengfei92" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>老旧的CSDN博客</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">&lt;br&gt;上海交通大学研究生在读&lt;br&gt;对新鲜事物感兴趣&lt;br&gt;云计算&lt;br&gt;深度学习&lt;br&gt;数据分析</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>